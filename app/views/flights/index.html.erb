
<%= form_with url: "/flights", method: :get do |form| %>
    <%= form.select(:num_of_passengers, options_for_select(1..4)) %>
    <%= form.select(:departure_airport, options_for_select(@departure_airports)) %>
    <%= form.select(:arrival_airport, options_for_select(@arrival_airports)) %>
    <%= form.select(:takeoff, options_from_collection_for_select(Flight.all, :takeoff, :takeoff_date_formatted)) %>
  <%= form.submit "Search" %>

  
<% end %>


<% if @flights.any? %>
  <p>Number of flights found: <%= @flights.size%></p>
  <%= form_with url: "/bookings/new", method: :get do |form| %>
    <% @flights.each do |flight| %>
      <%= form.radio_button :flight, flight.id%>
      <%= form.hidden_field :num_of_passengers, value: params[:num_of_passengers]%>
      <p>Departure Airport: <%= flight.departure_airport.name%></p>
      <p>Arrival Airport: <%= flight.arrival_airport.name%></p>
      <p>Date of flight: <%= flight.takeoff_date_formatted %></p>
      <p>Takeoff: <%= flight.takeoff_time_formatted %></p>
      <p>Duration: <%= flight.duration_formatted %></p>
      <%= form.submit "Select Flight"%>
    <% end %>
  <% end %>
<% else %>
  <p>No flights for this search!</p>
<% end %>


